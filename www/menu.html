<!DOCTYPE html>

<html style="height:100%" >
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
	<script src="javascripts/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="javascripts/styleFunc.js"></script>
    <script type="text/javascript" >
    	var pageNow = 1;
    	var apiAddress = "http://120.24.223.82:8080/Crossover/Api/";
    	var imgAddress = "http://120.24.223.82:8080/Crossover/images/";

	$(document).ready(function(){
		localStorage.lastView ="menu.html"
		//Start: Initial part
		var myObj = JSON.parse(localStorage.current_user);
		var lstAddress = apiAddress + "team/user/"+ myObj.UserID + "/list/" + pageNow;

		$('#myHead').attr('src', imgAddress + "TeamLogo/" +myObj.TeamLogo);
		$('#myName').text(myObj.TeamName);

		$.get(lstAddress, function(data){
			if (myObj.AdminID!=data.AdminID) Logout();
			var myList = data.scoreList;
			console.log(myObj.TeamID);
			localStorage["myList"+pageNow] = JSON.stringify(myList);
			for (var i = 0; i < myList.length; i++){
				var spc = '<div class="spc" style="height:1.5%;width:100%">';
				var col = '<div class="block" style="background:#FFFFFF;width:100%;margin-left:0;padding:1.5% 3% 1.5% 3%"><div class = "row blockr" id='+pageNow+'@'+i+'  style="background:rgb(247, 247, 247);width:100%;margin-left:0;padding:3% 3% 3% 3%"><table style="100%;"><tr><th style="width:60px"><img class="img-circle circle" src='+imgAddress+"TeamLogo/"+myList[i].TeamLogo+' style="height:50px;width:50px"></img></th><th style="width:57%;padding-left:2%"><span style="font-size:0.6em;color: rgb(2, 65, 126);font-weight:normal">'+myList[i].TeamName+'</span></th><th style="width:47%"><span class="glyphicon glyphicon-star" style="font-size:23px;color: rgb(2, 65, 126);"></span><span style="font-size:29px;font-style:italic;padding-left:11%;color: rgb(2, 65, 126);">'+myList[i].lntegral+'</span></th></tr></table></div></div>';

				var spc='<div class="spc" style="height:1.5%;width:100%"></div><div class="block" style="height:15%;background-color:white"><div class="row blockr" id='+pageNow+'@'+i+'  style="height:100%;width:96%;margin-left:2%;margin-right:2%;background-color: whitesmoke;">',
				    col_top='<div class="col-xs-3" style="padding:0;padding-left:3%"><img class="img-circle circle" src='+imgAddress+"TeamLogo/"+myList[i].TeamLogo+' style="margin:18% 0 0 0%;" /></div>',
				    col_mid='<div class="col-xs-4" style="padding:0;padding-top:2%;margin-left:-5%"><p style="margin:16% 0 0 0%;font-size:70%">'+myList[i].TeamName+'</p></div>',
				    col_end='<div class="col-xs-5" style="padding:0;display: -webkit-inline-box;padding-top:6%;padding-left:6%"><span class="glyphicon glyphicon-star" style="margin:26% 0 0 10%;font-size:18px"></span><p style="padding-left:10%;font-style:oblique; padding-top:3%">'+myList[i].lntegral+'</p></div></div>';

				$('.homePage').append(col);
				//$('.homePage').append(spc+col_top+col_mid+col_end);
			}
			$(".blockr").on({
				click:function(){
					var s1 = this.id.indexOf('@');
    				localStorage.userShow = JSON.stringify({
    					pageNow:this.id.substr(0, s1),
    					order:this.id.substr(s1+1, this.id.length-s1-1)
    				});
    				window.location.href = "detail_page.html";
    			},
    			touchstart:function(){
    				$(this).css("backgroundColor", "#178ED3");
    				},
    			touchend:function(){
    				$(this).css("backgroundColor", "#F6F7F7");
    				}
			});
		});	
		//End: Initial part
		//Start: Menu-slide part
			$(".menu-open").click(function(){
					$("#block-bg").css("display" ,"block");
 	 				$(".menu").removeClass('hidden').animate({right:""});
 	 				$(".body").animate({right:"+50%"});
    		});

		   	$("#block-bg").click(function(){
    				$(".menu").animate({right:"-50%"}, function(){$(".menu").addClass('hidden')}); 
      				$(".body").animate({right:"0"});
      				$("#block-bg").css("display" ,"none");
    		});
		//End: Menu-slide part
	})

 	function Logout(){
 		localStorage.current_user = "";
 		localStorage.lastView = "";
 		window.location.href = "index.html";
 	}

	</script>

	<title>CrossOver</title>
	<link rel='stylesheet' href='stylesheets/bootstrap.css'/>
	<link rel='stylesheet' href="stylesheets/menu.css">
	<link rel="stylesheet" href="stylesheets/style.css">
</head>
<body background="images/bg.png" style="height:100%">
	<div class="menu hidden" style="height:100%">
		<div class = "top" style="height:4%"></div>
		<div class="home" style="height:85%;width:100%">
			<img id="myHead" class="img-circle circle" style="margin: 5% 0% 0% 0%;height:66px;width:66px">
			<p id="myName">HEHE~</p>
			<button type="button" style="width: 60%;margin: 0% 0% 20px;height:35px;background-color:rgb(220, 221, 221);color:rgb(2, 65, 126)" class="btn btn-default" onclick="location.href='personal.html'">战队主页</button>
			<button type="button" style="width:60%;background-color:rgb(220, 221, 221);height:35px" class="btn btn-default" onclick="location.href='notify.html'">
 		  		<img src="images/menu-icon.png" height="20px">
			</button>
		</div>

		<div class="logout" style="">
			<button type="button" class="btn btn-danger" style="width:60%;background-color:rgb(230, 0, 18);color:#fff" onclick="Logout()">登出</button>
		</div>
	</div>

<div class="body" style="height:100%;  overflow: hidden">
	<div id="block-bg"></div>
	<nav class="navbar navbar-static-top" style="overflow:hidden;margin-bottom:0;height:10%">
		<div class="row" style="background-color:rgba(0,0,0,0);padding-top:2%">
			<div class="col-sm-6 col-xs-6 text-left" style="padding:2% 0 0 6%">
    			<img src="images/cs.png" width="72%">
    		</div>
    		<div class="col-sm-2 col-xs-2"></div>
    		<div class="col-sm-4 col-xs-4 text-right" style="padding:3% 6% 0 0">
  				<span class="menu-open glyphicon glyphicon-menu-hamburger" style="font-size:20px;color:#ffffff"></span>
			</div>
		</div>	
	</nav>
       
      <!-- Menu -->
    <div class="homePage" style="height:90%;max-width:100%;overflow:scroll">
    </div>  	
			
</div>	    
	
</body>